---
export const prerender = false;

import penguins from "../../assets/penguins.json";
import PlotFigure from "../../components/PlotFigure.astro";
import * as Plot from "@observablehq/plot";
import Layout from "../../layouts/Layout.astro";

const { species } = Astro.params;
const filtered = penguins.filter(p => p.species === species);

const options = {
  marks: [
    Plot.dot(filtered, {
      x: "culmen_length_mm",
      y: "culmen_depth_mm",
      fill: "#FFC0CB"
    })
  ],
  x: { label: "Longueur du bec " },
  y: { label: "Profondeur du bec" },
  title: `Pingouins - ${species}`
};
---
<Layout title={`Graphique de l'espece : ${species}`}>
<a 
  href="/" 
  class="relative inline-block text-pink-300 hover:text-pink-200 
         transition duration-300 pb-1 px-4 py-2 rounded-2xl 
         bg-gradient-to-r from-black via-gray-900 to-black 
         border border-red-900/40 shadow-[0_0_20px_rgba(80,0,0,0.5)]
         after:content-[''] after:absolute after:left-0 after:bottom-0 
         after:w-0 after:h-[2px] after:bg-pink-300 
         after:transition-all after:duration-300 hover:after:w-full">
  ← Retour à l’accueil
</a>
<h1 class="text-2xl font-semibold tracking-wide text-pink-300 drop-shadow-[0_0_8px_rgba(255,0,0,0.4)]">Graphique de l'espece : {species}</h1>
<PlotFigure options={options} />
</Layout>